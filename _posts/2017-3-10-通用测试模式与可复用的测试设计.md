
[https://msdn.microsoft.com/en-us/library/cc514239.aspx](译) 
                                       译 waiverson 2017.3.10

##### 摘要：传统的测试设计过程是具有重复性，其中多数测试问题具备通用元素，可以很容易地被后续的测试设计复用。本文指导您捕获这些模式，来使用它们简化后续测试的设计。
### 介绍
##### 通常的测试设计过程是非常重复的，但是许多测试问题具有通用元素，您可以在以后的测试设计的创建中轻松重用。您可以捕获这些模式，并使用它们来简化以后的测试设计的创建。
##### 但一直存在限制应用测试的有效性和效率的一个问题，即每当新的一组应用特征被定义出来时，通常会在开发和测试周期中从头开始并以某种类似随机的方式创建测试设计细节。其依赖的主要工具通常只是一个空的测试设计模板，模板中一般会包括要解决的测试问题类别，以及根据功能特性所编写的测试规范和测试用例。
##### 回归一系列的项目来看，测试设计活动就是存在大量重复性的区域：测试工程师从一份空白的测试设计文档开始，填充它的细节，这其中存在的许多问题和测试场景都是通用或者类似的。
##### 测试设计过程的目标应该是通过捕获和重用常见的测试模式来减少测试设计的随意性。
##### 测试模式的识别与软件开发中使用的设计模式非常相似。（还有一些经典的面向对象设计模式可能适合测试自动化设计，但我们不直接在这里讨论这些模式。）通过重用模式创建测试设计可以覆盖应用程序上很多方面的通用重复性的验证。这使测试工程师能够将更多的时间和思想集中在应用程序真正独特的方面，而不必浪费精力来定义测试设计的更通用的部分。
##### 正如编写软件的开发人员一样，努力通过使用现有的，通用的或重复操作的功能来最小化他们重新创建或全新构建的代码，所以对于那些每个应用程序所共有的功能，测试工程师也可以尽力减少他们花费在设计测试用例上的验证步骤，测试工程师应该能够复用以往针对类似情况已经设计的测试集。

### 专家测试模式
##### 经验丰富的专家测试人员经常通过将他们的知识和过去的经验用来识别新的测试场景与关联技术、测试问题和测试方法。当他们看到给定的测试场景时，他们立即识别出适用的测试方法。而另一方面，新手很可能无法识别出对应的测试技巧，以及可能出现的问题或陷阱。
##### 此外，专家知识没有被明确地捕获为可移植的模式以方便新手能够利用它，并且随着专家的离开，这些模式都降丢失。

### 测试类别检查清单
##### 未充分利用的工具是提供产品测试经验第一步的检查表。检查表使思考过程和积累的想法明确，以供日后的测试工程师重用。通常，他们是一份应用于测试和验证过程的启发式测试清单，以免遗漏任何明显的测试。在此上下文中的有效的测试清单是抽象的，以便它们适用于不同的应用程序。
##### 适当的抽象级别是：
##### * 检查每个具有最大长度的字符串数据。
##### * 检查每个具有null的必填字段。
##### * 对具有允许不同类型的字段的进行类型检验。
##### * 对所有数据值测试同时最大化或最大压力。
##### * 验证数据的正常值是否被接受，存储，检索和显示。
##### 不幸的是，那些通用的和特定的测试对象经常混在一起，没有考虑重用;通用的设计被埋在大量细节中，导致减少了重用价值。

### 故障模式
##### 成功的测试是发现问题的测试;经常发现的问题是由于永恒的错误和共同的失败模式。一些问题区域具有实现中的经典错误;一些概念设计具有与它们相关联的经典错误;一些技术具有固有的缺陷或限制;一些故障是关键或重要的，必须进行验证;并且一致地忽略了一些错误处理。
##### 专家测试人员的测试设计过程通常部分依赖于过去曾经出错的经验。然而，这个过去的经验不包括在任何产品的功能规范中，因此不是明确地要求验证。可以捕获专家测试的经验，并将其变成有价值的测试设计。
##### 测试通常围绕故障模式组织，以便故障模式的枚举是测试设计的有价值的部分。缺乏对新的，新颖的或不频繁的故障模式的预期是测试未能发现问题的主要来源，导致在测试阶段期间未检测到的错误影响了用户。通常，这些错误是根据过去的产品测试经验可能预期的故障模式的结果，但是这些经验未被新手测试人员捕获，共享。避免此问题的一个简单方法是为通用故障模式编写通用规范，将其转换为测试条件以进行验证或验证，并将其连接到任何测试设计模板。

### 覆盖所有测试对象
##### 具有正交性质的测试计划是识别具有强概念关系的测试类别，然后使用这些子集来确保在每个类别中实现测试完整性。一个有用的概念是基于“覆盖”的想法将问题分解为不同的可管理类别。在这种情况下，覆盖概念作为用于标识代码的未测试区域的特定技术（例如，用代码覆盖工具收集的度量指标）。
##### 这个分析过程的关键部分是创建尽可能多的单独类别，尽可能多的“覆盖”。迭代每个类别，构建应该覆盖的测试项目的列表。常见类别是用户场景覆盖，规范要求覆盖，特征覆盖，UI控制覆盖，字段覆盖，表单覆盖，输出/报告覆盖，错误覆盖，代码覆盖，条件覆盖，事件覆盖。
##### 该概念可以扩展到许多其他领域。识别多个测试类别有助于分析和设计过程，其经常应用于需求审查。具有形式化的类别集合允许测试工程师通过将问题划分为跨越多个维度的可测试片段或测试矩阵来将需求分解为可测试形式。

### 通用测试设计模板
##### 测试设计规范模板应扩展到典型的空文档部分以外，包括通用验证规则，测试用例检查表，常见故障模式和通用测试库。模板应包括许多对应用程序功能的常用测试，以便不必添加或重新发布它们。这个通用设计的一部分应该实现“样板”测试，这将是在考虑更复杂和实例特定的测试之前每个测试工作应该包括的第一个测试。这样，通用测试设计规范允许任何测试人员（例如，新的成员）在任何定制的，特定于应用程序的测试规划之前执行一系列通用测试。

### 杀虫剂论
##### 测试自动化 - 特别是当它被应用（作为通常的默认值）作为回归测试自动化 - 受制于静态测试数据。没有数据或执行路径的变化，BUG被发现的越来越少。矛盾的是，每个测试通过中发现的错误的减少不代表保留在系统中的错误的总数。在由静态数据测试的运行代码路径上，错误不太常见。在应用的未测试区域中的缺陷对测试方法（自动化杀虫剂论）有抵抗力。
##### 缺乏变化有时可以提高测试代码的稳定性，但是有损于良好的测试覆盖。在新bug的检测中，测试的有效性通过添加变化而显着改善，每个测试通过使用相同等价类内的不同数据值。自动化应该被设计为使得测试用例可以以通用等价类或数据类型作为参数，并且自动化框架应该可以随机地改变该类中的数据将其运行到每个测试上。 （自动化框架应记录种子值或实际使用的数据，允许以同样的数据重新运行或重新测试，主要是用于调试。）
##### 在某些情况下，使用动态选择的输入数据可能会有问题，因为确定预期结果可能很困难（Oracle问题）。然而，在许多情况下，存在可以自动选择和验证的测试，即使不需要复杂的方法来确定特定输入的正确测试输出。
##### 测试自动化策略经常仅仅基于回归测试的自动化，将所有的蛋放在那个篮子里。这类似于购买保险以防止由于回归而导致的故障：它是昂贵的，并且减轻了保险（自动化）覆盖的领域中的故障，但是它不会减少或防止未保险（未自动）部分中的问题。明智的保险购买策略通常基于选择最佳金额，而不是基于所有可用资源在镀金，零免赔额保险单上的支出。在测试方面，一些团队花费太多时间在自动化上 - 导致没有更多的精力专门用于其他类型的测试，这导致仅仅能识别出一小部分bug，让项目处在高风险下。
##### 测试自动化的成本/效益比可以通过集中于增加开发过程的稳定性，识别回归失败的来源并系统性的修复它们。某些情况下，可能不适合过度投资回归测试自动化策略，更有效的是投资其他更多形式的测试自动化以获得杠杆效应。否则，主要问题可能会从创建测试到发现错误演变成尝试管理和维护无数的冗余、重叠、过时或不正确的回归测试用例。
##### 以回归为中心的方法可能导致自动测试太静态。当考虑到所有维护和管理成本时，这些测试的成本/效益比率是边际的;他们没有发现很多错误。如果测试系统被设计为动态测试全范围的数据故障，备用调用模式和数字迭代，它们可以完成的测试覆盖远远超过回归测试。
##### 通过增加测试自动化的抽象，以“找到表单上的所有字符串并使用所有通用测试（应用随机数据变化，直到发生错误或尝试100,000个条件）”并持续运行测试，测试从略微提高有价值的静态回归套件到一个具有更高的为项目增值的通用工具。 （这有额外的好处是提供扩展软件测试工程师的技术机会，而不是仅仅维护遗留自动化。）
##### 高级抽象和使测试更通用的另一个好处是效率;添加测试用例应该简单快速，不需要划分数小时来设计测试用例的细节。测试自动化应该设计在“test this control（）”级别 - 而不是“点击这里，键入，等待此窗口”  - 授权范围广泛的测试人员去实施自动化测试和聚焦规划在有意义的测试上，而不是必须通过抽象不良的测试框架来实现简单化的测试场景。

### 概念的融合
##### 有许多有用的方法被应用于良好设计的测试，并可以有助于测试设计的重用：
##### * 等价类分区
##### * 边界值条件
##### * 强数据类型
##### * 设计模式
##### * 基于模型的测试
##### * 测试Oracles
##### * 测试数据生成器
##### 可重复使用的测试设计的优点之一是，您可以利用这些概念的融合并应用结果，从而提高测试对未来项目的成本/效益比。所有这些技术都有助于提高测试设计抽象的要素，提高重用，减少了重复，抬高了测试的复杂性，并扩展软件测试工程师的能力范围。

### 测试设计重用总结
##### 通过捕获和重用常用测试模式减少测试设计的重复性。
##### 识别和抽象测试问题，并以可以重新应用为更高级别的形式捕获它们，而不是总是下降到详细的实例级别。
##### 将过去的测试设计基本上视为通用测试设计“类”的单独实例。
##### 将过去的测试设计工作的结果和经验“制造”，“包装”或“产品化”为可以应用于类似测试工作的可重复使用的交付物。
##### 创建广义“要测试的事物”的检查清单，这将是一个资源，可在未来的版本或应用程序中重复使用。这些通用的测试清单加上特定项目独有的功能详细信息（通常是业务规则）和相关测试的单独列表构成完整的项目测试清单。
##### 枚举常见和通用故障模式作为要验证的项目，并将它们作为测试设计模板的一部分。
##### 枚举和记录显式测试“覆盖”类别，以便将它们纳入分析和测试设计。
##### 确保每个类别包含尽可能完整的一组测试，以确保涵盖该类别。将结果分成通用和独特的测试子集。重用这些列表的一般部分以备将来的努力。
##### 测试设计规范模板应该扩展到空文档部分以外，以包括通用验证规则，测试用例检查表，常见故障模式和通用测试库。
##### 通过使用在等价类或数据类型级别提供灵活的面向数据测试的测试基础架构来避免农药悖论，而不是仅支持特定的手工测试案例。改变测试数据和执行的路径将增加检测新错误的概率。

### 基本示例
##### 以下是一些经常出现的适合重用的测试设计模式。
#### CRUD模式
##### 1. 标识要在其上操作的记录或字段（基于输入名称和参数信息）。
##### 2. 从等价类生成随机化项。
##### 3. 验证不存在。
##### 4. 新增项目。
##### 5. 读取并验证未更改数据的存在性。
##### 6. 修改和验证匹配的修改数据。
##### 7. 删除并验证项目的删除。

#### 数据类型验证模式
##### 1. 在抽象层面识别具有类型特征的项目（例如，数据字段）;不应限于简单的数据类型，而应包括常见的业务数据类型（例如，电话号码，地址，邮政编码，客户，社会安全号码，日历日期等）。
##### 2. 枚举与类型相关联的通用业务规则。
##### 3. 为每个业务规则的值定义等价分区和边界。
##### 4. 从每个等价类中选择测试用例值。


#### 输入边界分割模式
##### 1. 枚举和选择输入项。
##### 2. 选择一个“有效”等价分区。
##### 3. 在该分区中应用查找或随机生成值，并将其用于测试。

#### 压力指标模式
##### 1. 标识要验证的系统响应。
##### 2. 标识压力指标（例如，项目数，项目大小，请求频率，请求的并发性，数据结构的复杂性和输入的维度）。
##### 3. 识别压力的起始水平。
##### 4. 验证和测量系统响应。
##### 5. 增加压力，并重复循环，直到系统响应失败。
##### 6. 切换到另一个压力场景。
##### 7. 增加压力，直到故障。
##### 8. 添加并发压力。
##### 9. 增加并发数，直到故障。

#### 基于错误检测模式的启发
##### 1. 枚举过去的人为错误模式。
##### 2. 选择观察到重复的模式。
##### 3. 标识故障模式可能适用的范围，并定期测试该故障，直到您确信故障模式未显示。

#### 文件测试图案
##### 1. 标识和定义要评估的文件和文件语义。
##### 2. 枚举文件的失败模式。
##### 3. 标识每个故障模式的系统响应以进行验证（创建Oracle，列表）。
##### 4. 选择每个故障模式，并将其依次应用到指定的文件。
##### 5. 验证响应。

#### 通用窗口UI操作
##### 1. 打开/关闭/最大化/最小化。
##### 2. 活动/非活动。
##### 3. 验证模态。
##### 4. 验证在顶部或后面时的正确显示和行为。
##### 5. 展开/调整大小。
##### 6. 移动。

### 结论
##### 测试人员应该围绕可重用​​的测试模式构建测试设计，这些测试模式对于大量的应用程序测试问题是常见的。将这些模式作为测试设计模板的标准部分，可以减少在测试设计上花费的时间，而无需从空白测试设计规范开始。重复使用这些模式具有编纂专家测试者知识的额外好处，以便增加捕获常见故障的可能性。

